; Copyright 1996 Acorn Computers Ltd
;
; Licensed under the Apache License, Version 2.0 (the "License");
; you may not use this file except in compliance with the License.
; You may obtain a copy of the License at
;
;     http://www.apache.org/licenses/LICENSE-2.0
;
; Unless required by applicable law or agreed to in writing, software
; distributed under the License is distributed on an "AS IS" BASIS,
; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
; See the License for the specific language governing permissions and
; limitations under the License.
;
; >RamFS00

        TTL     "Declarations and workspace allocation"

; Disc Record

        ^ 0
;
SectorSize      # 1     ;log2 sector size
SecsPerTrk      # 1
Heads           # 1     ;n-1 for old adfs floppy format
Density         # 1     ;1/2/4 single double quad

LinkBits        # 1
BitSize         # 1     ;log2 bytes for each bit in map, 0 for old format
RAskew          # 1     ;track to track sector skew for random access

BootOpt         # 1     ;boot option for this disc

LowSector       # 1     ; Lowest sector number on a track and flags:
                ; Bit     Meaning when set
LowSectorMask   * &3f
                ; 0-5     Lowest numbered sector on a track
SequenceSides   bit 6
                ; 6       Tracks are numbered 0..s-1 on side 0, then s..2s-1 on side 1, etc
DoubleStep      bit 7
                ; 7       Double step

Zones           # 1     ;# zones in map
ZoneSpare       # 2     ;# bits in zones after 0 which are not map bits
        ASSERT  (ZoneSpare :MOD: 4)=2

RootDir         aw 4
DiscSize        aw 4

DiscStruc       # 0     ;above entries (except BootOpt) define disc structure

DiscId          aw 2
DiscName        # 10
DiscRecSig      # 0     ;above entries form signature of disc

DiscType        aw 4    ; FileType of disc: FileType_Data indicates
                        ; that the disc is, as yet, unidentified.
                        ; This may occur as a result of the identification
                        ; process failing, or the identification process
                        ; not yet happening. FileType_Data discs have no
                        ; concept of a unique identifier so drive independance
                        ; when accessing them is not possible.

DiscSize2	aw 4	; top 32bits of the disc size.  This combines with
			; DiscSize to give the full size of the disc.  Note
			; that we may have to move DiscStruc to below here
			; so we can compare structures properly.
ShareSize       # 1     ; sharing unit
BigFlag         # 1     ; flag - 0 for small disc, 1 for big
BigFlagBit	* 1	; bit for the big flag
Zones2		# 1	; high byte of number of zones
SharePad	# 1	; padding
DiscVersion	# 4	; version number of disc format
RootDirSize	# 4	; size of root dir
DiscRecSig2     # 0     ;above entries form signature of disc

OldDirSize      * &500
NewDirSize      * &800
BigDirMinSize   * 2048

;MAIN WORKSPACE ALLOCATION

        ^ 0, SB

BufferStart     a4 4    ;THESE TWO MUST BE FIRST
BufferSize      a4 4

ScatterPair     a4 8
FileCorePrivate a4 4

	a4	64

MyPrivate 	a4 4

	a4	64

message_file_block  a4    16      ; File handle for MessageTrans
message_file_open   a4    4       ; Opened message file flag

WorkSize        a4 0

        END
